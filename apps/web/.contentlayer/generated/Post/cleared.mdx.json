{
  "title": "Building the Cleared Quiz Machine",
  "linkTitle": "Cleared",
  "date": "2019-09-16T00:00:00.000Z",
  "endDate": "2022-03-16T00:00:00.000Z",
  "lede": "A case study in scoping, designing and building a scalable Allergy Diagnosis Quiz system for Cleared, a digital healthcare platform I've been working with.",
  "category": "projects",
  "tags": [
    "design",
    "engineering",
    "teamwork"
  ],
  "libraryType": "post",
  "assets": [
    {
      "src": "/images/cleared-card-2000-1334.jpg",
      "alt": "Cleared Card",
      "aspect": "2000-1334",
      "showBorder": true,
      "type": "Asset",
      "_raw": {}
    }
  ],
  "nextPostLink": "breaka",
  "body": {
    "raw": "\n> Note well. While this post details a major feature release for [Cleared](https://www.getcleared.com), it also serves as an overview of my contribution to [Cleared](https://www.getcleared.com). I built the Cleared website and product from it's initial commit through to its [sale](https://www.crunchbase.com/acquisition/femd-acquires-cleared--a1f894e0), working with the [3 co-founders](https://www.crunchbase.com/organization/cleared) as tech lead, designer and frontend engineer, orchestrating a team of 5.\n\n[Cleared](https://www.getcleared.com) is a digital health startup, [recently acquired by LifeMD](https://www.globenewswire.com/news-release/2022/01/12/2365613/6480/en/LifeMD-Expands-Patient-Offerings-by-Acquiring-Leading-Allergy-Telehealth-Platform.html), that delivers allergy medications directly to your door. Our users visit the Cleared website, complete an allergy quiz, get custom recommendations, and then order treatments for delivery directly to their home address.\n\n<MediaDialogVideo\n  aspect=\"cleared-square\"\n  src=\"https://cdn.callumflack.design/cleared_checkout.mp4\"\n  poster=\"/images/video-poster-cleared-checkout.jpg\"\n  caption=\"Custom checkout with multiple user options\"\n  showBorder\n/>\n\nThe Cleared Dev Team started Q3 2021 with a big scalability problem: each Cleared Quiz was a standalone piece of code, so it took forever to create a new one even though our product team wanted to spin up new quizzes quickly. Enter the quiz machine: a scalable, on-demand quiz system that allows the Cleared product team to quickly create quizzes with minimal developer involvement.\n\nWhat follows is an overview of the Quiz Machine build process. If you don't wish to read further, please watch the demo above or check out the [Quiz Machine in action](https://portal.getcleared.com/start/environmental-allergy-quiz).\n\n## Our Stack\n\nThere are three parts to our stack: the frontend, the backend, and Services. We use a NextJS application with Chakra and Formik on the fronted end. On the backend, we use ExpressJS with the [Bulletproof Architecture](https://softwareontheroad.com/ideal-nodejs-project-structure/) and Postgres. We host both the NextJS and ExpressJS apps on [Render](https://render.com/).\n\nThere are a large number of 3rd-party services needed to make a digital health company like Cleared work properly. Here are some of the most important ones:\n\n- Stripe for payments\n- Capable Health as our quiz CMS\n- MDIntegrations as our Medical DB/EHR\n\nBoth Capable Health and MDIntegrations are new services to the Cleared stack that are needed to make the Quiz Machine work.\n\n## The Frontend\n\nThe Quiz Machine has 5 phases on the frontend:\n\n- an initial eligibility page to save the user spending time if they were not above a certain age or lived in a US state that was not eligible for our service\n- the quiz form itself\n- a product recommendations page, generated from the quiz answers\n- a sign-up or login phase where we also collected a person’s proof of personal identity and pharmacy choice\n- a checkout where a use can understand their order and manage their cart prior to purchase\n\nWe also incorporated bookmarking so that a signed-in user can leave the application, come back to their account, and receive a “todo” notice which will take them back to their bookmark within the specific Quiz Machine step.\n\nFinally, the checkout is the cornerstone of the Cleared ecommerce system: having gone through the previous 4 Quiz Machine phases, we want to “tie the bow” on the Quiz Machine experience. We support many types of purchases:\n\n- One-off purchases\n- Subscription purchases (30 day and 90 day renewals)\n- Over the counter treatments\n- Doctor prescriptions\n\nThe checkout interface is multi-faceted: it has to group and clarify each product and clearly associate it with the listed totals to make it easy for a user to understand what they’re buying.\n\nAnd because we require a Doctor’s prescription (via the MDIntegrations EHR), we don’t charge these payments immediately. Instead we accept the payment details (via Stripe) and await the Doctor’s prescription before triggering a Stripe charge.\n\n<MediaDialogVideo\n  allowSound\n  aspect=\"cleared-demo\"\n  src=\"https://cdn.callumflack.design/cleared_quiz_machine.mp4\"\n  poster=\"/images/video-poster-cleared_quiz_machine.jpg\"\n  caption=\"Note Quiz Machine demo, February 2020\"\n/>\n\n## The Quiz CMS: Capable Health\n\nCleared quizzes have many features: HIPPA compliance, conditional flows, product recommendations, analytics and more. We wanted a CMS that would support such rich quizzes and allow our product team to easily create ones: enter [Capable Health](https://capablehealth.com/).\n\nCapable Health offers a survey product that allows our product team to log-in and create new quizzes on-demand. Our frontend then takes the quizzes created in Capable Health and renders them using the Cleared design language.\n\nTwo great benefits of Capable Health are product recommendations based on quiz responses (ie. If a user answer Yes to question 2, recommend treatment X) and quiz analytics. Both of these features are not provided in a typical CMS, especially quiz analytics. Setting up an easy-to-use dashboard of quiz stats and metrics was easy. This information is great for our marketing team to investigate things like the drop-off on each quiz.\n\nExtending Capable Health, we were able to implement condition flows that allow quizzes to be dynamic based on users answers.\n\n## The EHR: MDIntegrations\n\nIn the world of digital health, physicians need an Electronic Health Record (EHR) to manage sensitive patient data, handle patient cases and prescribe medications in a HIPAA compliant manner. We chose [MDIntegrations](https://mdintegrations.com/) as our new EHR replacing a legacy system.\n\nOne of the key benefits of MDIntegrations is webhooks. With webhooks, we no longer have to maintain our own system of cron jobs to periodically query the API. This is very useful for keeping synchronization between our server and our EHR system, saving the time of our doctors. When events reach our server in real time we can process cases without delay, meaning our doctors can approve medications, wait for payment and transmit the prescriptions all in one sitting. We also built a queue system to make the webhooks even more reliable. This adds the extra reliability of an [events endpoint](https://blog.sequin.io/events-not-webhooks) over webhooks.\n\nMDIntegrations is an API based EHR. Being able to tightly integrate lets us reflect actions taken by doctors within the EHR in the Cleared portal. Doctors can recommend medications to a patient at any time without leaving MDIntegrations and a cart will automatically be created on the Cleared portal ready for the patient to checkout.\n\n## Putting it all together\n\nOur ExpressJS server coordinates between the frontend and all our services like MDIntegrations, Capable Health, and Stripe. Users interact directly with the Cleared frontend, while doctors can work within the tools they’re familiar with and handle cases entirely through MDIntegrations and the product team can create and modify quizzes in Capable Health.\n\n## The biggest obstacles\n\nPicking and then integrating with the right services for the quiz machine (ie. MDintegrations, Capable Health, and Stripe) was a large obstacle. In hindsight, we know exactly what is required to get the Quiz Machine working but making the right decisions among many different service options was a big challenge. One of the most important things we did during this period was developing close working relationships with the dev teams of MDIntegrations and Capable Health. Inevitably, things broke. And then we worked together to fix them. In using their product, we helped them scale their offering, and we got something that better suited our needs.\n\nHere are some additional obstacles:\n\n- managing scope creep as we discovered the service requirements;\n- orchestrating external services together as a coherent user experience;\n- [HIPAA compliance](https://www.hhs.gov/hipaa/for-professionals/security/laws-regulations/index.html) across our services to ensure the security of our patient health information;\n- allowing quizzes to be created and managed at scale by a non-technical product team;\n\n<MediaDialogImage\n  src=\"/images/cleared-quiz-machine-commits.jpg\"\n  alt=\"Quiz Machine commits tempo\"\n  aspect=\"cleared-commits\"\n  width={804}\n  height={211}\n  caption=\"Commit tempo with the final downhill slope representing release convergence\"\n/>\n\n## Future Directions\n\nThe Quiz Machine has been a great improvement to the Cleared Stack but it isn’t finished yet. There are improvements to make and features to add. Here are some of the projects are team plans to work on in the future:\n\n- Checkpointing + To-Dos. We want to make it easy for a user to pick back up where they left off on a quiz. If they only got halfway through a quiz, we want to send them an email reminder to finish. If they completed the quiz, we want to show them a to-do in their home screen to finish checkout on the quiz.\n- Landing Pages. Each quiz needs a beautiful landing page that is easy to spin up. Right now, we can create landing pages but it takes a lot of time for both our designers and dev team. We need a more scalable solution.\n\nWhile invention is fun, it only continues to exist if it’s maintainable. We did a good job of planning ahead for feature additions and maintenance in future by choosing to build base-level primitives (such as standardized query parameters). Whatever design decisions we made, we made with the intention of writing code that was as easy to understand—and extend or delete—as possible.\n\n<Note>\n  Written by the Cleared Engineering Team: [Zach\n  Hay](https://www.linkedin.com/in/zahay/), [Barry\n  Hood](https://github.com/BarryPH) and myself.\n</Note>\n",
    "code": "var Component=(()=>{var ct=Object.create;var z=Object.defineProperty;var ut=Object.getOwnPropertyDescriptor;var dt=Object.getOwnPropertyNames;var mt=Object.getPrototypeOf,ft=Object.prototype.hasOwnProperty;var V=(c,t)=>()=>(t||c((t={exports:{}}).exports,t),t.exports),pt=(c,t)=>{for(var f in t)z(c,f,{get:t[f],enumerable:!0})},Ne=(c,t,f,w)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let _ of dt(t))!ft.call(c,_)&&_!==f&&z(c,_,{get:()=>t[_],enumerable:!(w=ut(t,_))||w.enumerable});return c};var bt=(c,t,f)=>(f=c!=null?ct(mt(c)):{},Ne(t||!c||!c.__esModule?z(f,\"default\",{value:c,enumerable:!0}):f,c)),ht=c=>Ne(z({},\"__esModule\",{value:!0}),c);var ke=V((Nt,xe)=>{xe.exports=React});var Re=V(B=>{\"use strict\";(function(){\"use strict\";var c=ke(),t=Symbol.for(\"react.element\"),f=Symbol.for(\"react.portal\"),w=Symbol.for(\"react.fragment\"),_=Symbol.for(\"react.strict_mode\"),G=Symbol.for(\"react.profiler\"),J=Symbol.for(\"react.provider\"),X=Symbol.for(\"react.context\"),C=Symbol.for(\"react.forward_ref\"),j=Symbol.for(\"react.suspense\"),M=Symbol.for(\"react.suspense_list\"),U=Symbol.for(\"react.memo\"),I=Symbol.for(\"react.lazy\"),Te=Symbol.for(\"react.offscreen\"),K=Symbol.iterator,Se=\"@@iterator\";function Pe(e){if(e===null||typeof e!=\"object\")return null;var n=K&&e[K]||e[Se];return typeof n==\"function\"?n:null}var N=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function p(e){{for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];De(\"error\",e,a)}}function De(e,n,a){{var i=N.ReactDebugCurrentFrame,o=i.getStackAddendum();o!==\"\"&&(n+=\"%s\",a=a.concat([o]));var u=a.map(function(l){return String(l)});u.unshift(\"Warning: \"+n),Function.prototype.apply.call(console[e],console,u)}}var Oe=!1,ze=!1,je=!1,Me=!1,Ie=!1,Z;Z=Symbol.for(\"react.module.reference\");function qe(e){return!!(typeof e==\"string\"||typeof e==\"function\"||e===w||e===G||Ie||e===_||e===j||e===M||Me||e===Te||Oe||ze||je||typeof e==\"object\"&&e!==null&&(e.$$typeof===I||e.$$typeof===U||e.$$typeof===J||e.$$typeof===X||e.$$typeof===C||e.$$typeof===Z||e.getModuleId!==void 0))}function Ae(e,n,a){var i=e.displayName;if(i)return i;var o=n.displayName||n.name||\"\";return o!==\"\"?a+\"(\"+o+\")\":a}function ee(e){return e.displayName||\"Context\"}function g(e){if(e==null)return null;if(typeof e.tag==\"number\"&&p(\"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"),typeof e==\"function\")return e.displayName||e.name||null;if(typeof e==\"string\")return e;switch(e){case w:return\"Fragment\";case f:return\"Portal\";case G:return\"Profiler\";case _:return\"StrictMode\";case j:return\"Suspense\";case M:return\"SuspenseList\"}if(typeof e==\"object\")switch(e.$$typeof){case X:var n=e;return ee(n)+\".Consumer\";case J:var a=e;return ee(a._context)+\".Provider\";case C:return Ae(e,e.render,\"ForwardRef\");case U:var i=e.displayName||null;return i!==null?i:g(e.type)||\"Memo\";case I:{var o=e,u=o._payload,l=o._init;try{return g(l(u))}catch{return null}}}return null}var v=Object.assign,R=0,te,ne,re,ae,ie,se,le;function oe(){}oe.__reactDisabledLog=!0;function Fe(){{if(R===0){te=console.log,ne=console.info,re=console.warn,ae=console.error,ie=console.group,se=console.groupCollapsed,le=console.groupEnd;var e={configurable:!0,enumerable:!0,value:oe,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}R++}}function We(){{if(R--,R===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:v({},e,{value:te}),info:v({},e,{value:ne}),warn:v({},e,{value:re}),error:v({},e,{value:ae}),group:v({},e,{value:ie}),groupCollapsed:v({},e,{value:se}),groupEnd:v({},e,{value:le})})}R<0&&p(\"disabledDepth fell below zero. This is a bug in React. Please file an issue.\")}}var q=N.ReactCurrentDispatcher,A;function T(e,n,a){{if(A===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\\n( *(at )?)/);A=i&&i[1]||\"\"}return`\n`+A+e}}var F=!1,S;{var He=typeof WeakMap==\"function\"?WeakMap:Map;S=new He}function ce(e,n){if(!e||F)return\"\";{var a=S.get(e);if(a!==void 0)return a}var i;F=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var u;u=q.current,q.current=null,Fe();try{if(n){var l=function(){throw Error()};if(Object.defineProperty(l.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(l,[])}catch(y){i=y}Reflect.construct(e,[],l)}else{try{l.call()}catch(y){i=y}e.call(l.prototype)}}else{try{throw Error()}catch(y){i=y}e()}}catch(y){if(y&&i&&typeof y.stack==\"string\"){for(var s=y.stack.split(`\n`),b=i.stack.split(`\n`),d=s.length-1,m=b.length-1;d>=1&&m>=0&&s[d]!==b[m];)m--;for(;d>=1&&m>=0;d--,m--)if(s[d]!==b[m]){if(d!==1||m!==1)do if(d--,m--,m<0||s[d]!==b[m]){var h=`\n`+s[d].replace(\" at new \",\" at \");return e.displayName&&h.includes(\"<anonymous>\")&&(h=h.replace(\"<anonymous>\",e.displayName)),typeof e==\"function\"&&S.set(e,h),h}while(d>=1&&m>=0);break}}}finally{F=!1,q.current=u,We(),Error.prepareStackTrace=o}var k=e?e.displayName||e.name:\"\",ve=k?T(k):\"\";return typeof e==\"function\"&&S.set(e,ve),ve}function Ye(e,n,a){return ce(e,!1)}function $e(e){var n=e.prototype;return!!(n&&n.isReactComponent)}function P(e,n,a){if(e==null)return\"\";if(typeof e==\"function\")return ce(e,$e(e));if(typeof e==\"string\")return T(e);switch(e){case j:return T(\"Suspense\");case M:return T(\"SuspenseList\")}if(typeof e==\"object\")switch(e.$$typeof){case C:return Ye(e.render);case U:return P(e.type,n,a);case I:{var i=e,o=i._payload,u=i._init;try{return P(u(o),n,a)}catch{}}}return\"\"}var D=Object.prototype.hasOwnProperty,ue={},de=N.ReactDebugCurrentFrame;function O(e){if(e){var n=e._owner,a=P(e.type,e._source,n?n.type:null);de.setExtraStackFrame(a)}else de.setExtraStackFrame(null)}function Le(e,n,a,i,o){{var u=Function.call.bind(D);for(var l in e)if(u(e,l)){var s=void 0;try{if(typeof e[l]!=\"function\"){var b=Error((i||\"React class\")+\": \"+a+\" type `\"+l+\"` is invalid; it must be a function, usually from the `prop-types` package, but received `\"+typeof e[l]+\"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.\");throw b.name=\"Invariant Violation\",b}s=e[l](n,l,i,a,null,\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\")}catch(d){s=d}s&&!(s instanceof Error)&&(O(o),p(\"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).\",i||\"React class\",a,l,typeof s),O(null)),s instanceof Error&&!(s.message in ue)&&(ue[s.message]=!0,O(o),p(\"Failed %s type: %s\",a,s.message),O(null))}}}var Ve=Array.isArray;function W(e){return Ve(e)}function Be(e){{var n=typeof Symbol==\"function\"&&Symbol.toStringTag,a=n&&e[Symbol.toStringTag]||e.constructor.name||\"Object\";return a}}function Qe(e){try{return me(e),!1}catch{return!0}}function me(e){return\"\"+e}function fe(e){if(Qe(e))return p(\"The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.\",Be(e)),me(e)}var E=N.ReactCurrentOwner,Ge={key:!0,ref:!0,__self:!0,__source:!0},pe,be,H;H={};function Je(e){if(D.call(e,\"ref\")){var n=Object.getOwnPropertyDescriptor(e,\"ref\").get;if(n&&n.isReactWarning)return!1}return e.ref!==void 0}function Xe(e){if(D.call(e,\"key\")){var n=Object.getOwnPropertyDescriptor(e,\"key\").get;if(n&&n.isReactWarning)return!1}return e.key!==void 0}function Ke(e,n){if(typeof e.ref==\"string\"&&E.current&&n&&E.current.stateNode!==n){var a=g(E.current.type);H[a]||(p('Component \"%s\" contains the string ref \"%s\". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',g(E.current.type),e.ref),H[a]=!0)}}function Ze(e,n){{var a=function(){pe||(pe=!0,p(\"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",n))};a.isReactWarning=!0,Object.defineProperty(e,\"key\",{get:a,configurable:!0})}}function et(e,n){{var a=function(){be||(be=!0,p(\"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",n))};a.isReactWarning=!0,Object.defineProperty(e,\"ref\",{get:a,configurable:!0})}}var tt=function(e,n,a,i,o,u,l){var s={$$typeof:t,type:e,key:n,ref:a,props:l,_owner:u};return s._store={},Object.defineProperty(s._store,\"validated\",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(s,\"_self\",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.defineProperty(s,\"_source\",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.freeze&&(Object.freeze(s.props),Object.freeze(s)),s};function nt(e,n,a,i,o){{var u,l={},s=null,b=null;a!==void 0&&(fe(a),s=\"\"+a),Xe(n)&&(fe(n.key),s=\"\"+n.key),Je(n)&&(b=n.ref,Ke(n,o));for(u in n)D.call(n,u)&&!Ge.hasOwnProperty(u)&&(l[u]=n[u]);if(e&&e.defaultProps){var d=e.defaultProps;for(u in d)l[u]===void 0&&(l[u]=d[u])}if(s||b){var m=typeof e==\"function\"?e.displayName||e.name||\"Unknown\":e;s&&Ze(l,m),b&&et(l,m)}return tt(e,s,b,o,i,E.current,l)}}var Y=N.ReactCurrentOwner,he=N.ReactDebugCurrentFrame;function x(e){if(e){var n=e._owner,a=P(e.type,e._source,n?n.type:null);he.setExtraStackFrame(a)}else he.setExtraStackFrame(null)}var $;$=!1;function L(e){return typeof e==\"object\"&&e!==null&&e.$$typeof===t}function _e(){{if(Y.current){var e=g(Y.current.type);if(e)return`\n\nCheck the render method of \\``+e+\"`.\"}return\"\"}}function rt(e){{if(e!==void 0){var n=e.fileName.replace(/^.*[\\\\\\/]/,\"\"),a=e.lineNumber;return`\n\nCheck your code at `+n+\":\"+a+\".\"}return\"\"}}var we={};function at(e){{var n=_e();if(!n){var a=typeof e==\"string\"?e:e.displayName||e.name;a&&(n=`\n\nCheck the top-level render call using <`+a+\">.\")}return n}}function ge(e,n){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var a=at(n);if(we[a])return;we[a]=!0;var i=\"\";e&&e._owner&&e._owner!==Y.current&&(i=\" It was passed a child from \"+g(e._owner.type)+\".\"),x(e),p('Each child in a list should have a unique \"key\" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',a,i),x(null)}}function ye(e,n){{if(typeof e!=\"object\")return;if(W(e))for(var a=0;a<e.length;a++){var i=e[a];L(i)&&ge(i,n)}else if(L(e))e._store&&(e._store.validated=!0);else if(e){var o=Pe(e);if(typeof o==\"function\"&&o!==e.entries)for(var u=o.call(e),l;!(l=u.next()).done;)L(l.value)&&ge(l.value,n)}}}function it(e){{var n=e.type;if(n==null||typeof n==\"string\")return;var a;if(typeof n==\"function\")a=n.propTypes;else if(typeof n==\"object\"&&(n.$$typeof===C||n.$$typeof===U))a=n.propTypes;else return;if(a){var i=g(n);Le(a,e.props,\"prop\",i,e)}else if(n.PropTypes!==void 0&&!$){$=!0;var o=g(n);p(\"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?\",o||\"Unknown\")}typeof n.getDefaultProps==\"function\"&&!n.getDefaultProps.isReactClassApproved&&p(\"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.\")}}function st(e){{for(var n=Object.keys(e.props),a=0;a<n.length;a++){var i=n[a];if(i!==\"children\"&&i!==\"key\"){x(e),p(\"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.\",i),x(null);break}}e.ref!==null&&(x(e),p(\"Invalid attribute `ref` supplied to `React.Fragment`.\"),x(null))}}function lt(e,n,a,i,o,u){{var l=qe(e);if(!l){var s=\"\";(e===void 0||typeof e==\"object\"&&e!==null&&Object.keys(e).length===0)&&(s+=\" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\");var b=rt(o);b?s+=b:s+=_e();var d;e===null?d=\"null\":W(e)?d=\"array\":e!==void 0&&e.$$typeof===t?(d=\"<\"+(g(e.type)||\"Unknown\")+\" />\",s=\" Did you accidentally export a JSX literal instead of a component?\"):d=typeof e,p(\"React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s\",d,s)}var m=nt(e,n,a,o,u);if(m==null)return m;if(l){var h=n.children;if(h!==void 0)if(i)if(W(h)){for(var k=0;k<h.length;k++)ye(h[k],e);Object.freeze&&Object.freeze(h)}else p(\"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\");else ye(h,e)}return e===w?st(m):it(m),m}}var ot=lt;B.Fragment=w,B.jsxDEV=ot})()});var Ce=V((kt,Ee)=>{\"use strict\";Ee.exports=Re()});var yt={};pt(yt,{default:()=>gt,frontmatter:()=>_t});var r=bt(Ce()),_t={date:new Date(1568592e6),endDate:new Date(16473888e5),title:\"Building the Cleared Quiz Machine\",linkTitle:\"Cleared\",lede:\"A case study in scoping, designing and building a scalable Allergy Diagnosis Quiz system for Cleared, a digital healthcare platform I've been working with.\",assets:[{src:\"/images/cleared-card-2000-1334.jpg\",alt:\"Cleared Card\",aspect:\"2000-1334\"}],category:\"projects\",tags:[\"design\",\"engineering\",\"teamwork\"],nextPostLink:\"breaka\"};function Ue(c){let t=Object.assign({blockquote:\"blockquote\",p:\"p\",a:\"a\",h2:\"h2\",ul:\"ul\",li:\"li\"},c.components),{MediaDialogVideo:f,MediaDialogImage:w,Note:_}=t;return w||Q(\"MediaDialogImage\",!0,\"111:1-118:3\"),f||Q(\"MediaDialogVideo\",!0,\"23:1-29:3\"),_||Q(\"Note\",!0,\"129:1-133:8\"),(0,r.jsxDEV)(r.Fragment,{children:[(0,r.jsxDEV)(t.blockquote,{children:[`\n`,(0,r.jsxDEV)(t.p,{children:[\"Note well. While this post details a major feature release for \",(0,r.jsxDEV)(t.a,{href:\"https://www.getcleared.com\",children:\"Cleared\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:19,columnNumber:66},this),\", it also serves as an overview of my contribution to \",(0,r.jsxDEV)(t.a,{href:\"https://www.getcleared.com\",children:\"Cleared\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:19,columnNumber:157},this),\". I built the Cleared website and product from it's initial commit through to its \",(0,r.jsxDEV)(t.a,{href:\"https://www.crunchbase.com/acquisition/femd-acquires-cleared--a1f894e0\",children:\"sale\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:19,columnNumber:276},this),\", working with the \",(0,r.jsxDEV)(t.a,{href:\"https://www.crunchbase.com/organization/cleared\",children:\"3 co-founders\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:19,columnNumber:373},this),\" as tech lead, designer and frontend engineer, orchestrating a team of 5.\"]},void 0,!0,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:19,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:19,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:[(0,r.jsxDEV)(t.a,{href:\"https://www.getcleared.com\",children:\"Cleared\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:21,columnNumber:1},this),\" is a digital health startup, \",(0,r.jsxDEV)(t.a,{href:\"https://www.globenewswire.com/news-release/2022/01/12/2365613/6480/en/LifeMD-Expands-Patient-Offerings-by-Acquiring-Leading-Allergy-Telehealth-Platform.html\",children:\"recently acquired by LifeMD\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:21,columnNumber:68},this),\", that delivers allergy medications directly to your door. Our users visit the Cleared website, complete an allergy quiz, get custom recommendations, and then order treatments for delivery directly to their home address.\"]},void 0,!0,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:21,columnNumber:1},this),`\n`,(0,r.jsxDEV)(f,{aspect:\"cleared-square\",src:\"https://cdn.callumflack.design/cleared_checkout.mp4\",poster:\"/images/video-poster-cleared-checkout.jpg\",caption:\"Custom checkout with multiple user options\",showBorder:!0},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:23,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"The Cleared Dev Team started Q3 2021 with a big scalability problem: each Cleared Quiz was a standalone piece of code, so it took forever to create a new one even though our product team wanted to spin up new quizzes quickly. Enter the quiz machine: a scalable, on-demand quiz system that allows the Cleared product team to quickly create quizzes with minimal developer involvement.\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:31,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:[\"What follows is an overview of the Quiz Machine build process. If you don't wish to read further, please watch the demo above or check out the \",(0,r.jsxDEV)(t.a,{href:\"https://portal.getcleared.com/start/environmental-allergy-quiz\",children:\"Quiz Machine in action\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:33,columnNumber:144},this),\".\"]},void 0,!0,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:33,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.h2,{children:\"Our Stack\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:35,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:[\"There are three parts to our stack: the frontend, the backend, and Services. We use a NextJS application with Chakra and Formik on the fronted end. On the backend, we use ExpressJS with the \",(0,r.jsxDEV)(t.a,{href:\"https://softwareontheroad.com/ideal-nodejs-project-structure/\",children:\"Bulletproof Architecture\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:37,columnNumber:191},this),\" and Postgres. We host both the NextJS and ExpressJS apps on \",(0,r.jsxDEV)(t.a,{href:\"https://render.com/\",children:\"Render\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:37,columnNumber:341},this),\".\"]},void 0,!0,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:37,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"There are a large number of 3rd-party services needed to make a digital health company like Cleared work properly. Here are some of the most important ones:\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:39,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.ul,{children:[`\n`,(0,r.jsxDEV)(t.li,{children:\"Stripe for payments\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:41,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:\"Capable Health as our quiz CMS\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:42,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:\"MDIntegrations as our Medical DB/EHR\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:43,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:41,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"Both Capable Health and MDIntegrations are new services to the Cleared stack that are needed to make the Quiz Machine work.\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:45,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.h2,{children:\"The Frontend\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:47,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"The Quiz Machine has 5 phases on the frontend:\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:49,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.ul,{children:[`\n`,(0,r.jsxDEV)(t.li,{children:\"an initial eligibility page to save the user spending time if they were not above a certain age or lived in a US state that was not eligible for our service\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:51,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:\"the quiz form itself\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:52,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:\"a product recommendations page, generated from the quiz answers\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:53,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:\"a sign-up or login phase where we also collected a person\\u2019s proof of personal identity and pharmacy choice\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:54,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:\"a checkout where a use can understand their order and manage their cart prior to purchase\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:55,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:51,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"We also incorporated bookmarking so that a signed-in user can leave the application, come back to their account, and receive a \\u201Ctodo\\u201D notice which will take them back to their bookmark within the specific Quiz Machine step.\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:57,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"Finally, the checkout is the cornerstone of the Cleared ecommerce system: having gone through the previous 4 Quiz Machine phases, we want to \\u201Ctie the bow\\u201D on the Quiz Machine experience. We support many types of purchases:\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:59,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.ul,{children:[`\n`,(0,r.jsxDEV)(t.li,{children:\"One-off purchases\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:61,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:\"Subscription purchases (30 day and 90 day renewals)\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:62,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:\"Over the counter treatments\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:63,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:\"Doctor prescriptions\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:64,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:61,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"The checkout interface is multi-faceted: it has to group and clarify each product and clearly associate it with the listed totals to make it easy for a user to understand what they\\u2019re buying.\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:66,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"And because we require a Doctor\\u2019s prescription (via the MDIntegrations EHR), we don\\u2019t charge these payments immediately. Instead we accept the payment details (via Stripe) and await the Doctor\\u2019s prescription before triggering a Stripe charge.\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:68,columnNumber:1},this),`\n`,(0,r.jsxDEV)(f,{allowSound:!0,aspect:\"cleared-demo\",src:\"https://cdn.callumflack.design/cleared_quiz_machine.mp4\",poster:\"/images/video-poster-cleared_quiz_machine.jpg\",caption:\"Note Quiz Machine demo, February 2020\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:70,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.h2,{children:\"The Quiz CMS: Capable Health\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:78,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:[\"Cleared quizzes have many features: HIPPA compliance, conditional flows, product recommendations, analytics and more. We wanted a CMS that would support such rich quizzes and allow our product team to easily create ones: enter \",(0,r.jsxDEV)(t.a,{href:\"https://capablehealth.com/\",children:\"Capable Health\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:80,columnNumber:228},this),\".\"]},void 0,!0,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:80,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"Capable Health offers a survey product that allows our product team to log-in and create new quizzes on-demand. Our frontend then takes the quizzes created in Capable Health and renders them using the Cleared design language.\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:82,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"Two great benefits of Capable Health are product recommendations based on quiz responses (ie. If a user answer Yes to question 2, recommend treatment X) and quiz analytics. Both of these features are not provided in a typical CMS, especially quiz analytics. Setting up an easy-to-use dashboard of quiz stats and metrics was easy. This information is great for our marketing team to investigate things like the drop-off on each quiz.\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:84,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"Extending Capable Health, we were able to implement condition flows that allow quizzes to be dynamic based on users answers.\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:86,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.h2,{children:\"The EHR: MDIntegrations\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:88,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:[\"In the world of digital health, physicians need an Electronic Health Record (EHR) to manage sensitive patient data, handle patient cases and prescribe medications in a HIPAA compliant manner. We chose \",(0,r.jsxDEV)(t.a,{href:\"https://mdintegrations.com/\",children:\"MDIntegrations\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:90,columnNumber:202},this),\" as our new EHR replacing a legacy system.\"]},void 0,!0,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:90,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:[\"One of the key benefits of MDIntegrations is webhooks. With webhooks, we no longer have to maintain our own system of cron jobs to periodically query the API. This is very useful for keeping synchronization between our server and our EHR system, saving the time of our doctors. When events reach our server in real time we can process cases without delay, meaning our doctors can approve medications, wait for payment and transmit the prescriptions all in one sitting. We also built a queue system to make the webhooks even more reliable. This adds the extra reliability of an \",(0,r.jsxDEV)(t.a,{href:\"https://blog.sequin.io/events-not-webhooks\",children:\"events endpoint\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:92,columnNumber:578},this),\" over webhooks.\"]},void 0,!0,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:92,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"MDIntegrations is an API based EHR. Being able to tightly integrate lets us reflect actions taken by doctors within the EHR in the Cleared portal. Doctors can recommend medications to a patient at any time without leaving MDIntegrations and a cart will automatically be created on the Cleared portal ready for the patient to checkout.\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:94,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.h2,{children:\"Putting it all together\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:96,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"Our ExpressJS server coordinates between the frontend and all our services like MDIntegrations, Capable Health, and Stripe. Users interact directly with the Cleared frontend, while doctors can work within the tools they\\u2019re familiar with and handle cases entirely through MDIntegrations and the product team can create and modify quizzes in Capable Health.\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:98,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.h2,{children:\"The biggest obstacles\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:100,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"Picking and then integrating with the right services for the quiz machine (ie. MDintegrations, Capable Health, and Stripe) was a large obstacle. In hindsight, we know exactly what is required to get the Quiz Machine working but making the right decisions among many different service options was a big challenge. One of the most important things we did during this period was developing close working relationships with the dev teams of MDIntegrations and Capable Health. Inevitably, things broke. And then we worked together to fix them. In using their product, we helped them scale their offering, and we got something that better suited our needs.\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:102,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"Here are some additional obstacles:\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:104,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.ul,{children:[`\n`,(0,r.jsxDEV)(t.li,{children:\"managing scope creep as we discovered the service requirements;\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:106,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:\"orchestrating external services together as a coherent user experience;\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:107,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:[(0,r.jsxDEV)(t.a,{href:\"https://www.hhs.gov/hipaa/for-professionals/security/laws-regulations/index.html\",children:\"HIPAA compliance\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:108,columnNumber:3},this),\" across our services to ensure the security of our patient health information;\"]},void 0,!0,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:108,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:\"allowing quizzes to be created and managed at scale by a non-technical product team;\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:109,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:106,columnNumber:1},this),`\n`,(0,r.jsxDEV)(w,{src:\"/images/cleared-quiz-machine-commits.jpg\",alt:\"Quiz Machine commits tempo\",aspect:\"cleared-commits\",width:804,height:211,caption:\"Commit tempo with the final downhill slope representing release convergence\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:111,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.h2,{children:\"Future Directions\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:120,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"The Quiz Machine has been a great improvement to the Cleared Stack but it isn\\u2019t finished yet. There are improvements to make and features to add. Here are some of the projects are team plans to work on in the future:\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:122,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.ul,{children:[`\n`,(0,r.jsxDEV)(t.li,{children:\"Checkpointing + To-Dos. We want to make it easy for a user to pick back up where they left off on a quiz. If they only got halfway through a quiz, we want to send them an email reminder to finish. If they completed the quiz, we want to show them a to-do in their home screen to finish checkout on the quiz.\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:124,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:\"Landing Pages. Each quiz needs a beautiful landing page that is easy to spin up. Right now, we can create landing pages but it takes a lot of time for both our designers and dev team. We need a more scalable solution.\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:125,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:124,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"While invention is fun, it only continues to exist if it\\u2019s maintainable. We did a good job of planning ahead for feature additions and maintenance in future by choosing to build base-level primitives (such as standardized query parameters). Whatever design decisions we made, we made with the intention of writing code that was as easy to understand\\u2014and extend or delete\\u2014as possible.\"},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:127,columnNumber:1},this),`\n`,(0,r.jsxDEV)(_,{children:(0,r.jsxDEV)(t.p,{children:[\"Written by the Cleared Engineering Team: \",(0,r.jsxDEV)(t.a,{href:\"https://www.linkedin.com/in/zahay/\",children:`Zach\nHay`},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:130,columnNumber:44},this),\", \",(0,r.jsxDEV)(t.a,{href:\"https://github.com/BarryPH\",children:`Barry\nHood`},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:131,columnNumber:45},this),\" and myself.\"]},void 0,!0,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:130,columnNumber:3},this)},void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:129,columnNumber:1},this)]},void 0,!0,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\",lineNumber:1,columnNumber:1},this)}function wt(c={}){let{wrapper:t}=c.components||{};return t?(0,r.jsxDEV)(t,Object.assign({},c,{children:(0,r.jsxDEV)(Ue,c,void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\"},this)}),void 0,!1,{fileName:\"/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx\"},this):Ue(c)}var gt=wt;function Q(c,t,f){throw new Error(\"Expected \"+(t?\"component\":\"object\")+\" `\"+c+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(f?\"\\nIt\\u2019s referenced in your code at `\"+f+\"` in `/Users/callumflack/Repos/t-tw/apps/web/posts/_mdx_bundler_entry_point-16ac0876-5894-4494-b85e-c6c0ce52b249.mdx`\":\"\"))}return ht(yt);})();\n/*! Bundled license information:\n\nreact/cjs/react-jsx-dev-runtime.development.js:\n  (**\n   * @license React\n   * react-jsx-dev-runtime.development.js\n   *\n   * Copyright (c) Facebook, Inc. and its affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n*/\n;return Component;"
  },
  "_id": "cleared.mdx",
  "_raw": {
    "sourceFilePath": "cleared.mdx",
    "sourceFileName": "cleared.mdx",
    "sourceFileDir": ".",
    "contentType": "mdx",
    "flattenedPath": "cleared"
  },
  "type": "Post",
  "slug": "cleared",
  "readingTime": {
    "text": "8 min read",
    "minutes": 7.145,
    "time": 428700,
    "words": 1429
  }
}